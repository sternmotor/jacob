#!/usr/bin/env python
# -*- coding: utf-8 -*-

# test if ip:port is open
import socket

def isOpen(ip,port):
    s = socket.socket(socket.AF_INET, socket.SOCK_STREAM)
    try:
     s.connect((ip, int(port)))
     s.shutdown(2)
     return True
    except:
     return False


# sort ip's
def compare_ips(x, y):

    # split and transfer ip segements to integer
    x1, x2, x3, x4 = [ int(z) for z in x[0].split('.') ]
    y1, y2, y3, y4 = [ int(z) for z in y[0].split('.') ]

    # do comparison
    if   x1 > y1: return  1
    elif x1 < y1: return -1
    else:
        if   x2 > y2: return  1
        elif x2 < y2: return -1
        else:
            if   x3 > y3: return  1
            elif x3 < y3: return -1
            else:
                if   x4 > y4: return  1
                elif x4 < y4: return -1
                else:
                    return 0
    
def sortedIps( ips ):
    return sorted( ips, cmp=compare_ips)

